<!DOCTYPE html>
<html lang="de">
<head>
    <style>#impressum,#datenschutz,#uberuns,#input-form,#confirm{display:none}</style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kleiderspenden-Registrierung</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"/>
      <style>
        
        .form-container {
            flex: 1;
            display: flex;}
        .form-group {
            flex: 2;      
            margin-bottom: 10px;}
        .form-check {
            flex: 1;}
        .checkbox-container label, .select-container select {
            flex:auto;}
             
        .container {
            display: flex; 
            margin-left: 0;
            padding: 0;}   
        .checkbox-container, .select-container {
                padding: 2px;           
                display: flex;
                flex-direction: column;}
        .logo-center {
                display: none;}
        .header {
            justify-content: space-between;
            display: flex;
            height: 250px;}
        .logo-left img, .logo-right img {
            height: 100%;}
        .logo-left, .logo-right {
            display: flex;}
        .logo-center {
            display: none;}  
        @media (max-width: 767px) {
            .form-container {
                flex-direction: column;}
            .logo-left, .logo-right, .heading {
                display: none;}
            .logo-center {
                display: flex;}
            .logo-center img {
                width: 100%;}
            .header{
                flex-direction: column;
                height:auto;}    
        }
    </style>
</head>
<body>
    <header class="bg-dark text-light text-center container-fluid header py-3">
        <div class="logo-center my-3">
            <img src="logo.png" alt="Logo">
        </div>
        <div class="logo-left">
            <img src="logo.png" alt="Logo">
        </div>
        <div class="d-flex flex-column align-items-center justify-content-center">
            <h1 class="display-3">Kleiderspende-Brandenburg</h1>
            <h3 class="display-6">Hier können Sie Ihre Kleidungspende registrieren!</h2>
        </div>  
        <div class="logo-right">
            <img src="logo.png" alt="Logo">
        </div>
    </header>
    <nav class="navbar bg-light">
        <ul class="m-auto py-2">
          <li class="list-inline-item"><a href="javascript:void(0);" onclick="showSitecontent('main-content')">Home</a></li>
          <li class="list-inline-item"><a href="javascript:void(0);" onclick="showSitecontent('uberuns')">Über uns</a></li>
        </ul>
    </nav>
    <main>
        <div id="main-content" class="ms-4">
            
                <h2>Registrierungsformular:</h2><br>
                <form id="registrationForm">
                    <div class="form-container">
                        <div class="form-check">
                            <input type="radio" class="form-check-input" id="geschaeft" name="terms" value="geschaeft" required onclick="toggleForm()">
                            <label class="form-check-label border border-primary rounded px-2" for="geschaeft">Übergabe an der Geschäftsstelle</label><br><br>
                            <input type="radio" class="form-check-input" id="abholung" name="terms" value="abholung" required onclick="toggleForm()">
                            <label class="form-check-label border border-primary rounded px-2" for="abholung">Abholung über Abholfahrzeug</label><br><br>
                            <div class="form-sel">
                            <label class="form-check-label" for="terms">Art und Anzahl der Kleidung:</label><br><br>
                                <div class="container">
                                    <div class="checkbox-container">
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Hose"> Hose</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="T-Shirt"> T-Shirt</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Pullover"> Pullover</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Socken"> Socken</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Mütze"> Mütze</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Schuhe"> Schuhe</label>
                                        <label class="m-2"><input type="checkbox" name="k_items" id="Jacke"> Jacke</label>
                                    </div>
                                    <div class="select-container" id="select-anzahl">
                                        <select  class="m-2" for="anz_hose" id="anz_Hose"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_shirt" id="anz_T-Shirt"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_pulli" id="anz_Pullover"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_sock" id="anz_Socken"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_muetze" id="anz_Mütze"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_schuh" id="anz_Schuhe"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                        <select  class="m-2" for="anz_jack" id="anz_Jacke"><option>1-5</option><option>5-10</option><option>10-50</option><option>über 50</option></select>
                                    </div>
                                </div>    
                        
                            <br>
                            <div class="my-3">
                            <label class="form-check-label" for="terms">Krisengebiet:</label>
                            <select for="Krisengebiet" id="krisengebiet">
                                <option value="nix"></option>
                                <option value="ukraine">Ukraine</option>
                                <option value="syrien">Syrien</option>
                                <option value="afghanistan">Afghanistan</option>
                                <option value="äthiopien">Äthiopien</option>
                                <option value="sudan">Sudan</option>
                            </select><br><br>
                            </div>
                        </div>
                        </div>
                        <div class="form-group" id="input-form">
                            <h2>Abholadresse:</h2><br>
                            <label>Vorname:</label><br>
                            <input type="text" id="vorname"><br><br>
                            <label>Nachname:</label><br>
                            <input type="text" id="nachname"><br><br>
                            <label>Straße:</label><br>
                            <input type="text" id="strasse"><br><br>
                            <label>Postleitzahl:</label><br>
                            <input type="text" id="postleitzahl"><br><br>
                            <label>Stadt</label><br>
                            <input type="stadt" id="stadt"><br><br>
                            <label>E-Mail</label><br>
                            <input type="email" id="email"><br><br><br>
                        </div>    
                    </div>
                    <input class="ms-4" type="submit" value="Registrieren" id="regist">
                </form>
           
            <div id="error-label" class="ms-4">
                <label for="error-label" id="error-label" class="text-white">Platzhalter</label>
            </div>
        </div>
        <div id="confirm" class="m-4">
            <h2>Registrierung erfolgreich!</h2><br>
            <h3>Folgende Daten wurden aufgenommen:</h3><br>
            <label id="zeitpunktConfirm"></label><br>
            <label id="ortConfirm"></label><br>
            <label id="kleidungConfirm"></label><br>
            <label id="krisengebietConfirm"></label><br>  
            <label id="abholConfirm"></label><br>  
            <label id="vornameConfirm"></label>
            <label id="nachnameConfirm"></label><br>
            <label id="strasseConfirm"></label><br>
            <label id="postleitzahlConfirm"></label>
            <label id="stadtConfirm"></label><br>
            <label id="emailConfirm"></label>
        </div>
        <script>
            function showSitecontent(content) {
                var mainContent = document.getElementById("main-content");
                var impressum = document.getElementById("impressum");
                var datenschutz = document.getElementById("datenschutz");
                var uberuns = document.getElementById("uberuns");
                var subContent = document.getElementById(content);
                var confirmContent =document.getElementById("confirm");
                mainContent.style.display = "none";
                impressum.style.display = "none";
                datenschutz.style.display = "none";
                uberuns.style.display = "none";
                confirmContent.style.display = "none"
                subContent.style.display = "block";
            }
            
            function toggleForm() {
                var terms1 = document.getElementById("geschaeft");
                var inputForm = document.getElementById("input-form");
                if (terms1.checked) {
                    inputForm.style.display = "none";
                } else {
                    inputForm.style.display = "block" ;
                }
            }
            document.getElementById('registrationForm').addEventListener('submit', function(event) {
                event.preventDefault();
                document.getElementById('error-label').style.color= 'white'
                document.getElementById('error-label').innerText = "Platzhalter";
                var checkboxes = document.querySelectorAll('input[name="k_items"]:checked');
                var ausgewahlteItems = [];
                checkboxes.forEach((checkbox) => {ausgewahlteItems.push(checkbox.value);});
                if (ausgewahlteItems.length==0){
                   errorMessage("Bitte die Art der Kleidung auswählen.")
                   return;}
                var gebietSelect = document.getElementById('krisengebiet');//Element mit der ID "kleidung beschaffen"
                var ausgewahlterText2 = gebietSelect.options[gebietSelect.selectedIndex].text;// Den ausgewählten Text aus dem select-Element auslesen
                if (ausgewahlterText2==""){
                    errorMessage("Bitte ein Krisengebiet auswählen.")
                    return;}
                if (document.getElementById('abholung').checked){
                    if (document.getElementById('vorname').value==""){errorMessage("Bitte Vornamen eingeben.");return;}
                    if (document.getElementById('nachname').value==""){errorMessage("Bitte Nachnamen eingeben.");return;}
                    if (document.getElementById('strasse').value==""){errorMessage("Bitte Straße eingeben.");return;}
                    if (!Number.isFinite(+document.getElementById('postleitzahl').value)){errorMessage("Die Postleitzahl muss aus Zahlen bestehen.");return;}
                    if (document.getElementById('postleitzahl').value==""){errorMessage("Bitte Postleitzahl eingeben.");return;}
                    if (document.getElementById('stadt').value==""){errorMessage("Bitte Stadt eingeben.");return;}
                    var first2postleitzahl = document.getElementById("postleitzahl").value.substring(0,2);
                    if (first2postleitzahl!=14){errorMessage("Der Abholort ist zu weit entfert. Die Postleitzahl muss mit 14 beginnen.");return;}
                }
                
                buildConfirmSite();   
                clearRegist();
                showConfirmSite();
                
            })
            function showConfirmSite(){
                var mainContent = document.getElementById("main-content");
                mainContent.style.display = "none";
                var confirmContent = document.getElementById("confirm");
                confirmContent.style.display= "block";
            }
            function clearRegist(){
                var inputs = document.querySelectorAll('#registrationForm input');
                inputs.forEach(function(input) {if (input.id!='regist'){
                input.value = '';}});
                var radios = document.querySelectorAll('input[type="radio"]');
                radios.forEach(function(radio) {
                radio.checked = false;});
                var checkboxes = document.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(function(checkbox) {
                checkbox.checked = false;});
                var selectElement = document.getElementById("krisengebiet");
                selectElement.selectedIndex = 0
                var inputs = document.querySelectorAll('#select-anzahl select');
                inputs.forEach(function(input) {input.selectedIndex=0});
                
            }
            function buildConfirmSite(){
                
                //Datum ermitteln und aufgearbeitet übergeben
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                const formattedDateTime = now.toLocaleDateString('de-DE', options);
                document.getElementById('zeitpunktConfirm').innerText = `Zeitpunkt: ${formattedDateTime}`;  
                //Text abhängig von Radiobutton "geschaeft ermitteln"
                var terms1 = document.getElementById("geschaeft");  
                if (terms1.checked) {temp_text="Übergabe an der Geschäftsstelle."}else{temp_text="Abholen von Abholadresse."}
                document.getElementById('ortConfirm').innerText=temp_text
                //Text für Art und Anzahl Kleidung zusammenstellen
                               
                var checkboxes = document.querySelectorAll('input[name="k_items"]:checked');
                var ausgewahlteItems = [];
                var select_anzahl=[];
                var select_anzahl_text=[]
                checkboxes.forEach((checkbox) => {
                    select_anzahl=document.getElementById("anz_"+checkbox.id)
                    
                    select_anzahl_text=select_anzahl.options[select_anzahl.selectedIndex].text;
                    ausgewahlteItems.push(checkbox.parentElement.textContent.trim()+"("+select_anzahl_text+" Stk.)")
                });
                document.getElementById('kleidungConfirm').innerText="Ausgewählte Kleidung: " + ausgewahlteItems.join(', ');
                //Text für Krisengebiet aus Dropdown 
                var gebietSelect = document.getElementById('krisengebiet');
                var ausgewahlterText2 = gebietSelect.options[gebietSelect.selectedIndex].text;
                document.getElementById('krisengebietConfirm').innerText="Ausgewähltes Krisengebiet: "+ausgewahlterText2
                //optinalen Text für Adressangaben
                if (terms1.checked){
                    document.getElementById('abholConfirm').innerText=""
                    document.getElementById('vornameConfirm').innerText=""
                    document.getElementById('nachnameConfirm').innerText=""
                    document.getElementById('strasseConfirm').innerText=""
                    document.getElementById('postleitzahlConfirm').innerText=""
                    document.getElementById('stadtConfirm').innerText=""
                    document.getElementById('emailConfirm').innerText=""
                }else{
                    document.getElementById('abholConfirm').innerText="Abholadresse:";
                    document.getElementById('abholConfirm').style.fontWeight = "bold";
                    document.getElementById('vornameConfirm').innerText=document.getElementById('vorname').value+" ";
                    document.getElementById('nachnameConfirm').innerText=document.getElementById('nachname').value;
                    document.getElementById('strasseConfirm').innerText=document.getElementById('strasse').value;
                    document.getElementById('postleitzahlConfirm').innerText=document.getElementById('postleitzahl').value+" ";
                    document.getElementById('stadtConfirm').innerText=document.getElementById('stadt').value;
                    document.getElementById('emailConfirm').innerText="Informationen zur Abholung werden an die E-Mail Adresse "+ document.getElementById('email').value+" gesendet.";
                }
            }
            function errorMessage(text){
                document.getElementById('error-label').style.color= 'red'
                document.getElementById('error-label').classList.add('ms-4')
                document.getElementById('error-label').innerText = text;
            }
            
        </script>
    </main>
    <div id="impressum" class="m-4">
        <h2>Impressum</h2>
        <p>Hier steht das Impressum</p>
    </div>
    <div id="datenschutz" class="m-4">
        <h2>Datenschutz</h2>
        <p>Hier stehen Informationen zum Datenschutz</p>
    </div>
    <div id="uberuns" class="m-4">
        <h2>Infos über Uns</h2>
        <p>Hier stehen Informationen über uns</p>
    </div>
    <footer class="mt-5 bg-light text-center">
        <ul class="m-auto py-2">
          <li class="list-inline-item"><a href="javascript:void(0);" onclick="showSitecontent('impressum')">Impressum</a></li>
          <li class="list-inline-item"><a href="javascript:void(0);" onclick="showSitecontent('datenschutz')">Datenschutz</a></li>
        </ul>
    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>